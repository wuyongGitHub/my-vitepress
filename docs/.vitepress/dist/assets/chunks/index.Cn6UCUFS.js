import{d as k,p,q as w,v as A,c as u,F as g,C as y,k as _,N as x,P as q,o as c,j as F,t as T,n as S,_ as B,x as $,G as C}from"./framework.DVkiNd0e.js";import{w as D}from"./tool.BsbwrfuX.js";const Y=k({name:"BqNumberAnimate",__name:"NumberAnimate",props:{value:{default:0},math:{default:"ceil"},textMaxWidth:{default:"9.6px"},duration:{default:1},effect:{default:"ease-in-out"}},setup(N){const i=p(["0"]),l=p(["0"]),m=p("20px"),r=N;w(()=>r.value,(e,t)=>{e!==t&&d(e)});const o=p([]);let f=null;const v=e=>{let t=e;switch(r.math){case"ceil":t=Math.ceil(e);break;case"floor":t=Math.floor(e);break;case"abs":t=Math.abs(e);break;case"none":t=e;break}return t},d=e=>{const t=v(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");for(l.value=i.value,i.value=Array.from(t);l.value.length<i.value.length;)l.value.unshift("0");const s=i.value.length-l.value.length;s<0&&l.value.splice(0,Math.abs(s)),console.log(r,"props.transition"),o.value.forEach(a=>{a.style.transform="translateY(0)",a.style.transition=`transform 0s ${r.effect}`}),q(()=>{f&&clearTimeout(f),f=setTimeout(()=>{o.value.forEach((a,n)=>{const h=M(l.value[n],i.value[n]);h?(a.style.transform=h.transform,a.style.transition=h.transition):(a.style.transform="none",a.style.transition="none")})},50)})},b=(e,t)=>{if(isNaN(Number(t)))return[t];if(e===t)return[t];const s=[0,1,2,3,4,5,6,7,8,9];let a=[];return isNaN(Number(e))?a=s.filter(n=>n<=Number(t)):e>t?(a.push(...s.filter(n=>n>=Number(e))),a.push(...s.filter(n=>n<=Number(t)))):a.push(...s.filter(n=>n>=Number(e)&&n<=Number(t))),a},M=(e,t)=>{const s=b(e,t).length;return s===1?null:{transform:`translateY(-${(s-1)/s*100}%)`,transition:`transform ${r.duration}s ${r.effect}`}};return A(()=>{if(d(r.value),o.value.length>0){const e=window.getComputedStyle(o.value[0]);m.value=e.height}}),(e,t)=>(c(),u("div",{class:"bq-animate-number",style:x({height:_(m)}),ref:""},[(c(!0),u(g,null,y(_(i),(s,a)=>(c(),u("div",{key:"num_"+a},[F("div",{ref_for:!0,ref_key:"numDiv",ref:o,class:S(["num-item",s===","?"comma":""])},[(c(!0),u(g,null,y(b(_(l)[a],s),(n,h)=>(c(),u("div",{style:x({width:isNaN(n)?"":r.textMaxWidth}),key:"div_"+a+"_"+h,class:"num-line"},T(n),5))),128))],2)]))),128))],4))}}),E=B(Y,[["__scopeId","data-v-e55f4d51"]]),I={class:"container"},L=k({name:"BqNumberAnimate",__name:"BasicsNumberAnimate",setup(N){const i=p(5216731711211e-3);let l=0,m=0;const r=o=>{o&&o-m>=2e3&&(m=o,i.value+=1e3),l=requestAnimationFrame(r)};return A(()=>{r()}),$(()=>{cancelAnimationFrame(l)}),(o,f)=>{const v=E;return c(),u("div",I,[C(v,{value:_(i),textMaxWidth:"22.5px"},null,8,["value"])])}}}),W=B(L,[["__scopeId","data-v-9f0314ad"]]),j=D(W);export{j as BqBasicsNumberAnimate};
