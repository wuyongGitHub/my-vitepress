import{d as Z,p as i,az as G,D as K,c as J,N as j,n as ne,k as r,j as k,o as Q,_ as ee,a8 as H,v as ce,a0 as ue,x as de,q as M,h as P,G as q,r as ve,K as $}from"./framework.hf2HU-Pq.js";import{a as pe}from"./tool.BsbwrfuX.js";const fe=Z({name:"Bar",__name:"Bar",props:{thumbWrapperSize:{},showCoord:{},handleThumbClick:{type:Function},className:{},styleObj:{type:[Boolean,null,String,Object,Array]},direction:{}},setup(u,{expose:O}){const N=u,_=i(),{className:f,thumbWrapperSize:C,showCoord:h,handleThumbClick:L,styleObj:a,direction:n}=G(N);return O({barRef:K(_)}),(o,c)=>(Q(),J("div",{class:ne(r(f)),style:j({"--size":r(C)+"px",display:r(h).y?"block":"none"})},[k("div",{class:"scroll-bar",ref_key:"barRef",ref:_,onMousedown:c[0]||(c[0]=d=>{r(L)(d,r(n))}),style:j(r(a))},null,36)],6))}}),U=ee(fe,[["__scopeId","data-v-8116cf6f"]]);var x=(u=>(u.VERTICAL="vertical",u.HORIZONTAL="horizontal",u))(x||{});const he=Z({name:"BqScrollBar",__name:"ScrollBar",props:{thumbWrapperSize:{default:6},autoHide:{type:[Boolean,Object],default:!0},barMinSize:{default:16}},emits:["scroll"],setup(u,{expose:O,emit:N}){const _=u,{thumbWrapperSize:f,autoHide:C,barMinSize:h}=G(_),L=N,a=i(),n=i(),o=i(),c=i(),d=i(),E=i(),A=i(0),m=i(0),R=H({x:!1,y:!1}),v=H({width:0,height:0}),p=H({x:0,y:0}),w=H({x:0,y:0}),g=i(0),y=i(0);let B=null,W=null;const te=e=>{if(L("scroll",e),a.value&&e.target){let t=e.target,l=((t.scrollHeight-a.value.clientHeight)/(a.value.clientHeight-v.height)).toFixed(2),s=((t.scrollWidth-a.value.clientWidth)/(a.value.clientWidth-v.width)).toFixed(2),b=Number((t.scrollTop/Number(l)).toFixed(2)),S=Number((t.scrollLeft/Number(s)).toFixed(2));Object.assign(w,{x:Number(s),y:Number(l)}),Object.assign(p,{y:b<=0?0:b,x:S<=0?0:S})}},F=(e,t)=>{var l;if(E.value=t,t===x.VERTICAL){if(c.value&&c.value.barRef){let s=(l=c.value.barRef)==null?void 0:l.getBoundingClientRect();m.value=e.clientY-s.top,V(e)}}else if(d.value&&d.value.barRef){let s=d.value.barRef.getBoundingClientRect();m.value=e.clientX-s.left,V(e)}},V=e=>{e.stopPropagation(),document.addEventListener("mousemove",X),document.addEventListener("mouseup",Y),document.onselectstart=()=>!1},X=e=>{if(E.value===x.VERTICAL){if(n.value&&c.value){let t=n.value.getBoundingClientRect(),l=(e.clientY-t.top-m.value)*w.y;a.value&&(a.value.scrollTop=l<=0?0:l)}}else if(n.value&&d.value){let t=n.value.getBoundingClientRect(),l=(e.clientX-t.left-m.value)*w.x;a.value&&(a.value.scrollLeft=l<=0?0:l)}},Y=()=>{m.value=0,document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",Y)},le=()=>{var t,l;let e=a.value;if(e&&n.value){let s=(e==null?void 0:e.clientWidth)*((e==null?void 0:e.clientWidth)/(e==null?void 0:e.scrollWidth)),b=(e==null?void 0:e.clientHeight)*((e==null?void 0:e.clientHeight)/(e==null?void 0:e.scrollHeight)),S=((e.scrollHeight-e.clientHeight)/(e.clientHeight-v.height)).toFixed(2),se=((e.scrollWidth-e.clientWidth)/(e.clientWidth-v.width)).toFixed(2);Object.assign(w,{x:Number(se),y:Number(S)}),Object.assign(v,{width:s<h.value?h.value:s,height:b<h.value?h.value:b}),y.value=(e==null?void 0:e.clientWidth)===(e==null?void 0:e.scrollWidth)?0:z("x")?1:0,g.value=(e==null?void 0:e.clientHeight)===(e==null?void 0:e.scrollHeight)?0:z("y")?1:0}e&&o.value&&Object.assign(R,{x:((t=o.value)==null?void 0:t.scrollWidth)>(e==null?void 0:e.clientWidth),y:((l=o.value)==null?void 0:l.scrollHeight)>(e==null?void 0:e.clientHeight)})},T=()=>{var t,l;let e=a.value;e&&o.value&&Object.assign(R,{x:((t=o.value)==null?void 0:t.clientWidth)>(e==null?void 0:e.clientWidth),y:((l=o.value)==null?void 0:l.clientHeight)>(e==null?void 0:e.clientHeight)}),D()},I=new ResizeObserver(e=>{D()}),D=pe(()=>{le()},300),z=e=>{let t=C.value;return t instanceof Object?t[e]:t},ae=()=>{B&&(clearTimeout(B),B=null),g.value!==1&&(g.value=1),B=setTimeout(()=>{g.value=0},3e3)},oe=()=>{W&&(clearTimeout(W),W=null),y.value!==1&&(y.value=1),W=setTimeout(()=>{y.value=0},3e3)};O({view:K(a)}),ce(async()=>{{let e=await ue(()=>import("./generateBar.Bf3gObi8.js"),[]);A.value=e.getScrollBarWidth,o.value&&I.observe(o.value),window.addEventListener("resize",T),T()}}),de(()=>{window.removeEventListener("resize",T),o.value&&I.unobserve(o.value)}),M(()=>p.x,()=>{p.x!==0&&!z("x")&&oe()},{deep:!0}),M(()=>p.y,()=>{p.y!==0&&!z("y")&&ae()},{deep:!0});const ie=P(()=>({className:"right-scroll",thumbWrapperSize:f.value,showCoord:R,domRef:void 0,handleThumbClick:F,direction:x.VERTICAL,styleObj:{"--size":f.value+"px",transform:`translateY(${p.y}px)`,height:v.height+"px",opacity:r(g)}})),re=P(()=>({className:"bottom-scroll",thumbWrapperSize:f.value,showCoord:R,direction:x.HORIZONTAL,handleThumbClick:F,styleObj:{"--size":f.value+"px",transform:`translateX(${p.x}px)`,width:v.width+"px",opacity:r(y)}}));return(e,t)=>(Q(),J("div",{class:"bq-scrollbar",ref_key:"wrapperRef",ref:n},[k("div",{onScroll:te,className:"bq-scrollbar-view_wrap",ref_key:"domRef",ref:a,style:j({"--size":r(A)+"px"})},[k("div",{className:"bq-scrollbar_view",ref_key:"viewBarRef",ref:o},[ve(e.$slots,"default",{},void 0,!0)],512)],36),q(U,$(r(ie),{ref_key:"rightBarRef",ref:c}),null,16),q(U,$(r(re),{ref_key:"bottomBarRef",ref:d}),null,16)],512))}}),ye=ee(he,[["__scopeId","data-v-3766bf5d"]]);export{ye as _};
