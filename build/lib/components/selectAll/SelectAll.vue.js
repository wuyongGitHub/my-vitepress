"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),f=require("ant-design-vue"),y=e.defineComponent({name:"BqSelectAll",__name:"SelectAll",emits:["change","search","blur"],setup(w,{emit:h}){const i=h,t=e.useAttrs(),r=e.ref([]),s=e.ref([]);let c=!1;const m=e.defineComponent({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),d=(n,l)=>{r.value.length===0&&(r.value=t.options??[]),s.value=n,i("change",n,l)},g=n=>{n.stopPropagation(),n.preventDefault()},k=n=>{let l=[];l=[...r.value];const a=[...s.value];t["onUpdate:value"]||console.warn("v-model:value 不存在");let u=n.target.checked?(l??[]).map(o=>o.value):[];if(n.target.checked){if(t.options&&t.options.length>0)for(let o=0;o<u.length;o++)a.includes(u[o])||a.push(u[o])}else{for(let o=0;o<a.length;o++)r.value.includes(a[o])||(a.splice(o,1),o--);t["onUpdate:value"]&&t["onUpdate:value"]([]),d([],[])}u=a,s.value=[...a];let b=n.target.checked?l:[];t["onUpdate:value"]&&t["onUpdate:value"](u),d(u,b)},C=n=>{var l;if(t.filterOption&&t.filterOption instanceof Function){let a=(l=t.options)==null?void 0:l.filter(u=>t.filterOption instanceof Function&&t.filterOption(n,u));r.value=a??[]}else console.warn("请传入filterOption方法");i("search",n)},V=n=>{r.value=t.options??[],i("blur",n)},v=e.computed(()=>s.value.length===0?!1:(r.value??[]).map(l=>l.value).every(l=>(s.value??[]).includes(l))),S=e.computed(()=>Array.isArray(t.value)&&(t.value??[]).length===0?!1:!v.value),p=e.computed(()=>(r??[]).value.length===0?!1:v.value);return e.watch(()=>t.options,()=>{!c&&(t.options??[]).length>0&&(r.value=t.options??[],c=!c)},{deep:!0,immediate:!0}),e.onMounted(()=>{s.value=t.value??[]}),(n,l)=>(e.openBlock(),e.createBlock(e.unref(f.Select),e.mergeProps(n.$attrs,{autoClearSearchValue:!1,mode:"multiple",onBlur:V,onSearch:C,onChange:d}),{dropdownRender:e.withCtx(({menuNode:a})=>[e.createVNode(e.unref(m),{vnodes:a},null,8,["vnodes"]),e.createVNode(e.unref(f.Divider),{style:{margin:"4px 0"}}),e.createElementVNode("div",{style:{"padding-left":"11px"},onMousedown:g},[e.createVNode(e.unref(f.Checkbox),{disabled:e.unref(r).length===0,indeterminate:e.unref(S),checked:e.unref(p),"onUpdate:checked":l[0]||(l[0]=u=>e.isRef(p)?p.value=u:null),onChange:k},null,8,["disabled","indeterminate","checked"]),l[1]||(l[1]=e.createTextVNode(" 全选 ",-1))],32)]),_:1},16))}});exports.default=y;
