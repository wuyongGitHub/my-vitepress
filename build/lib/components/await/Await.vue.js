"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),i=require("ant-design-vue"),f=e.defineComponent({name:"BqAwait",__name:"Await",props:{request:{},useLoading:{type:Boolean,default:!0},spinProps:{default:()=>({tip:"数据正在加载中"})},options:{},useSkeleton:{type:Boolean,default:!0},useError:{type:Boolean,default:!0}},setup(a){const o=a,s=e.ref(!1),t=e.ref(!1),u=e.ref(),r=e.ref();e.useSlots();const l=async()=>{r&&(r.value=null),t.value=!0;try{let n=await o.request(o.options);u.value=n}catch(n){r.value=n}finally{t.value=!1,console.log("end",t.value,r.value),s.value=!0}};return e.onMounted(l),o.options&&e.watch(()=>o.options,()=>{l()},{deep:!0}),(n,d)=>e.unref(r)&&o.useError?e.renderSlot(n.$slots,"error",e.normalizeProps(e.mergeProps({key:0},{error:e.unref(r)}))):!e.unref(s)&&a.useSkeleton?e.renderSlot(n.$slots,"skeleton",{key:1}):o.useLoading?(e.openBlock(),e.createBlock(e.unref(i.Spin),e.mergeProps({key:2},o.spinProps,{spinning:e.unref(t)}),{default:e.withCtx(()=>[e.renderSlot(n.$slots,"default",e.normalizeProps(e.guardReactiveProps(Object.assign({},{data:e.unref(u),loading:e.unref(t),error:e.unref(r),onceStatus:e.unref(s)}))))]),_:3},16,["spinning"])):e.renderSlot(n.$slots,"default",e.normalizeProps(e.mergeProps({key:3},Object.assign({},{data:e.unref(u),loading:e.unref(t),error:e.unref(r),onceStatus:e.unref(s)}))))}});exports.default=f;
